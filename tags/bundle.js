function d(){let t=localStorage.getItem("authToken");return t?{Authorization:`Bearer ${t}`}:{}}var s="https://terryapi.dimitri.ge/api";async function y(){let t=await fetch(`${s}/tags`);if(!t.ok)throw new Error("can't retireve tags");return await t.json()}function w(t){return fetch(`${s}/category`,{method:"POST",headers:{"Content-Type":"application/json",...d()},body:JSON.stringify({name:t})})}function E(t){return fetch(`${s}/category/${t}`,{method:"DELETE",headers:d()})}function T(t,e){return fetch(`${s}/category/${t}/tag`,{method:"POST",headers:{"Content-Type":"application/json",...d()},body:JSON.stringify({name:e,categoryName:t})})}function x(t,e){return fetch(`${s}/category/${t}/tag/${e}`,{method:"DELETE",headers:d()})}var g=document.getElementById("categories");function C(t){g.innerHTML="";let e=document.createElement("button");e.classList.add("new-category"),e.textContent="\u10D0\u10EE\u10D0\u10DA\u10D8 \u10D9\u10D0\u10E2\u10D4\u10D2\u10DD\u10E0\u10D8\u10D8\u10E1 \u10D3\u10D0\u10DB\u10D0\u10E2\u10D4\u10D1\u10D0",g.appendChild(e);for(let[n,o]of Object.entries(t)){let a=document.createElement("details");a.open=!0;let i=document.createElement("summary");i.textContent=n;let l=document.createElement("button");l.classList.add("remove-category"),l.textContent="\u10D9\u10D0\u10E2\u10D4\u10D2\u10DD\u10E0\u10D8\u10D8\u10E1 \u10EC\u10D0\u10E8\u10DA\u10D0",l.dataset.categoryName=n,i.appendChild(l);let p=document.createElement("ul");for(let h of o){let u=document.createElement("li");u.textContent=h;let c=document.createElement("button");c.dataset.tagName=h,c.dataset.categoryName=n,c.classList.add("remove-tag"),c.textContent="\u10D7\u10D0\u10D2\u10D8\u10E1 \u10EC\u10D0\u10E8\u10DA\u10D0",u.appendChild(c),p.appendChild(u)}let f=document.createElement("li"),m=document.createElement("button");m.classList.add("new-tag"),m.textContent="\u10D0\u10EE\u10D0\u10DA\u10D8 \u10D7\u10D0\u10D2\u10D8\u10E1 \u10D3\u10D0\u10DB\u10D0\u10E2\u10D4\u10D1\u10D0",m.dataset.categoryName=n,f.appendChild(m),p.appendChild(f),a.append(i,p),g.appendChild(a)}}g.addEventListener("click",async t=>{let e=t.target,n=!1;if(e.classList.contains("new-tag")){let{categoryName:o}=e.dataset,a=prompt("\u10D0\u10EE\u10D0\u10DA\u10D8 \u10D7\u10D0\u10D2\u10D8\u10E1 \u10E1\u10D0\u10EE\u10D4\u10DA\u10D8");(await T(o,a)).ok&&r[o].push(a),n=!0}if(e.classList.contains("new-category")){let o=prompt("\u10D0\u10EE\u10D0\u10DA\u10D8 \u10D9\u10D0\u10E2\u10D4\u10D2\u10DD\u10E0\u10D8\u10D8\u10E1 \u10E1\u10D0\u10EE\u10D4\u10DA\u10D8");(await w(o)).ok&&(r[o]=[]),n=!0}if(e.classList.contains("remove-tag")){let{categoryName:o,tagName:a}=e.dataset;if((await x(o,a)).ok){let i=r[o].indexOf(a);r[o].splice(i,1)}n=!0}if(e.classList.contains("remove-category")){let{categoryName:o}=e.dataset;(await E(o)).ok&&delete r[o],n=!0}n&&(C(r),t.stopPropagation())});var r;try{r=await y()}catch{r={\u10D9\u10D5\u10DA\u10D4\u10D5\u10D0:["PISA","PIRLS"]}}C(r);
//# sourceMappingURL=bundle.js.map
