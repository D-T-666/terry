var $={Authorization:"Bearer "+(localStorage.getItem("authToken")??"")};function d(){return $}var s="https://terryapi.dimitri.ge/api";async function y(){let t=await fetch(`${s}/tags`);if(!t.ok)throw new Error("can't retireve tags");return await t.json()}function T(t){return fetch(`${s}/category`,{method:"POST",headers:{"Content-Type":"application/json",...d()},body:JSON.stringify({name:t})})}function w(t){return fetch(`${s}/category/${t}`,{method:"DELETE",headers:d()})}function x(t,e){return fetch(`${s}/category/${t}/tag`,{method:"POST",headers:{"Content-Type":"application/json",...d()},body:JSON.stringify({name:e,categoryName:t})})}function E(t,e){return fetch(`${s}/category/${t}/tag/${e}`,{method:"DELETE",headers:d()})}var g=document.getElementById("categories");function C(t){g.innerHTML="";let e=document.createElement("button");e.classList.add("new-category"),e.textContent="\u10D0\u10EE\u10D0\u10DA\u10D8 \u10D9\u10D0\u10E2\u10D4\u10D2\u10DD\u10E0\u10D8\u10D8\u10E1 \u10D3\u10D0\u10DB\u10D0\u10E2\u10D4\u10D1\u10D0",g.appendChild(e);for(let[o,n]of Object.entries(t)){let a=document.createElement("details");a.open=!0;let i=document.createElement("summary");i.textContent=o;let m=document.createElement("button");m.classList.add("remove-category"),m.textContent="\u10D9\u10D0\u10E2\u10D4\u10D2\u10DD\u10E0\u10D8\u10D8\u10E1 \u10EC\u10D0\u10E8\u10DA\u10D0",m.dataset.categoryName=o,i.appendChild(m);let p=document.createElement("ul");for(let f of n){let u=document.createElement("li");u.textContent=f;let c=document.createElement("button");c.dataset.tagName=f,c.dataset.categoryName=o,c.classList.add("remove-tag"),c.textContent="\u10D7\u10D0\u10D2\u10D8\u10E1 \u10EC\u10D0\u10E8\u10DA\u10D0",u.appendChild(c),p.appendChild(u)}let h=document.createElement("li"),l=document.createElement("button");l.classList.add("new-tag"),l.textContent="\u10D0\u10EE\u10D0\u10DA\u10D8 \u10D7\u10D0\u10D2\u10D8\u10E1 \u10D3\u10D0\u10DB\u10D0\u10E2\u10D4\u10D1\u10D0",l.dataset.categoryName=o,h.appendChild(l),p.appendChild(h),a.append(i,p),g.appendChild(a)}}g.addEventListener("click",async t=>{let e=t.target,o=!1;if(e.classList.contains("new-tag")){let{categoryName:n}=e.dataset,a=prompt("\u10D0\u10EE\u10D0\u10DA\u10D8 \u10D7\u10D0\u10D2\u10D8\u10E1 \u10E1\u10D0\u10EE\u10D4\u10DA\u10D8");(await x(n,a)).ok&&r[n].push(a),o=!0}if(e.classList.contains("new-category")){let n=prompt("\u10D0\u10EE\u10D0\u10DA\u10D8 \u10D9\u10D0\u10E2\u10D4\u10D2\u10DD\u10E0\u10D8\u10D8\u10E1 \u10E1\u10D0\u10EE\u10D4\u10DA\u10D8");(await T(n)).ok&&(r[n]=[]),o=!0}if(e.classList.contains("remove-tag")){let{categoryName:n,tagName:a}=e.dataset;if((await E(n,a)).ok){let i=r[n].indexOf(a);r[n].splice(i,1)}o=!0}if(e.classList.contains("remove-category")){let{categoryName:n}=e.dataset;(await w(n)).ok&&delete r[n],o=!0}o&&(C(r),t.stopPropagation())});var r;try{r=await y()}catch{r={\u10D9\u10D5\u10DA\u10D4\u10D5\u10D0:["PISA","PIRLS"]}}C(r);
