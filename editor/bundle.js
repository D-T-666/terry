var st=Object.defineProperty;var m=(e,t)=>{for(var n in t)st(e,n,{get:t[n],enumerable:!0})};var w=function(e){return e[e.rightClick=0]="rightClick",e[e.element=1]="element",e[e.preset=2]="preset",e}({}),C=[document.getElementById("left-pane-right-click-menu"),document.getElementById("element-menu"),document.getElementById("preset-menu")],ct={[w.element]:w.rightClick,[w.preset]:w.rightClick},$e;function T(){for(let e of C)e.style.visibility="hidden"}function dt(e,t){let n=t.getBoundingClientRect();C[e].style.top=`${n.top}px`,C[e].style.left=`calc(${n.right}px + 0.25rem)`,C[e].style.visibility="visible",$e=e}function P(e,t,n){if(t.length>0)for(let o of C[e].children)o.disabled=!t.includes(o.id);else{console.error("requested to open a menu with 0 options.");for(let o of C[e].children)o.disabled=!1}dt(e,n)}document.addEventListener("click",function(e){let t=[],n=$e;for(;n!==void 0;)t.push(n),n=ct[n];let o;for(let r=0;r<3;r++)if(C[r].contains(e.target)){o=r;break}for(;t.length>0&&t[t.length-1]!==o;)t.pop();for(let r=0;r<3;r++)t.includes(r)||(C[r].style.visibility="hidden")});var I=document.getElementById("tree-view"),f=document.getElementById("main-content"),Oe=document.getElementById("right-pane");var N={};m(N,{attributes:()=>Ae,initializeToolbar:()=>mt,realElement:()=>k,showToolbar:()=>ut});function c(e,t,n,o){o===void 0&&(o=`${e}-${n}`);let r=document.createElement(t);return r.id=n,r.dataset.name=o,r.dataset.type=e,r}function k(){let e=a();return c("container","div",e,`\u10D9\u10DD\u10DC\u10E2\u10D4\u10D8\u10DC\u10D4\u10E0\u10D8 (${e})`)}var h={},U=e=>document.getElementById(e);function mt(){h.layout=U("container-toolbar-layout"),h.padding=U("container-toolbar-padding"),h.border=U("container-toolbar-border"),h.align=U("container-toolbar-align"),h.layout.addEventListener("change",()=>{i().dataset.layout=h.layout.value}),h.padding.addEventListener("change",()=>{i().style.padding=h.padding.value+"px"}),h.border.addEventListener("change",()=>{i().dataset.border=h.border.value}),h.align.addEventListener("change",()=>{i().dataset.align=h.align.value})}function ut(e){let t=Ae(e);for(let[n,o]of Object.entries(t))h[n].value=o}function Ae(e){return{layout:e.dataset.layout??"",padding:(e.style.padding??"0  ").slice(0,-2),border:e.dataset.border??"",align:e.dataset.align??""}}var $={};m($,{attributes:()=>ze,children:()=>ft,initializeToolbar:()=>ht,mounted:()=>pt,realElement:()=>L,showToolbar:()=>gt});var je=[];function J(e){let t=e.parentElement;for(;t.id!=="main-content";){if(je.includes(t.id))return;t=t.parentElement}je.push(e.id),e.contentEditable="true",console.log(`making ${e} contenteditable;`)}function L(){let e=a();return c("paragraph","p",e,`\u10DE\u10D0\u10E0\u10D0\u10D2\u10E0\u10D0\u10E4\u10D8 (${e})`)}function pt(e){J(e)}var ft=["text","formula"],g={},W=e=>document.getElementById(e);function ht(){g["line-height"]=W("paragraph-toolbar-line-height"),g["first-line-indent"]=W("paragraph-toolbar-first-line-indent"),g["spacing-above"]=W("paragraph-toolbar-spacing-above"),g["spacing-below"]=W("paragraph-toolbar-spacing-below"),g["line-height"].addEventListener("change",()=>{i().style.lineHeight=g["line-height"].value+"%"}),g["first-line-indent"].addEventListener("change",()=>{i().style.textIndent=g["first-line-indent"].value+"%"}),g["spacing-above"].addEventListener("change",()=>{i().style.marginTop=g["spacing-above"].value+"rem"}),g["spacing-below"].addEventListener("change",()=>{i().style.marginBottom=g["spacing-below"].value+"rem"})}function gt(e){let t=ze(e);for(let[n,o]of Object.entries(t))g[n].value=o}function ze(e){return{"line-height":(e.style.lineHeight??"%").slice(0,-1),"first-line-indent":(e.style.lineHeight??"%").slice(0,-1),"spacing-above":(e.style.marginTop??"rem").slice(0,-2),"spacing-below":(e.style.marginBottom??"rem").slice(0,-2)}}var ie={};m(ie,{attributes:()=>_e,initializeToolbar:()=>yt,realElement:()=>bt,showToolbar:()=>vt});function bt(){let e=a();return c("formula","span",e,`\u10E4\u10DD\u10E0\u10DB\u10E3\u10DA\u10D0 (${e})`)}var H={},Et=e=>document.getElementById(e);function yt(){H.content=Et("formula-toolbar-content"),H.content.addEventListener("keyup",()=>{i().dataset.content=H.content.value;let e=MathJax.tex2mml(H.content.value);i().innerHTML=e,i().firstChild.setAttribute("display","inline")})}function vt(e){let t=_e(e);for(let[n,o]of Object.entries(t))H[n].value=o}function _e(e){return{content:e.dataset.content??""}}var V={};m(V,{attributes:()=>De,initializeToolbar:()=>wt,mounted:()=>xt,realElement:()=>le,showToolbar:()=>It});function le(){let e=a();return c("text","span",e,`\u10E2\u10D4\u10E5\u10E1\u10E2\u10D8 (${e})`)}function xt(e){J(e)}var d={},O=e=>document.getElementById(e);function wt(){d.content=O("text-toolbar-content"),d.color=O("text-toolbar-color"),d.bold=O("text-toolbar-bold"),d.italic=O("text-toolbar-italic"),d.underline=O("text-toolbar-underline"),d.size=O("text-toolbar-size"),console.log("but whyyyy"),d.content.addEventListener("keyup",()=>{i().innerText=d.content.value},!1),d.color.addEventListener("change",()=>{i().style.color=d.color.value},!1),d.bold.addEventListener("change",()=>{i().style.fontWeight=d.bold.checked?"bold":"normal"},!1),d.italic.addEventListener("change",()=>{i().style.fontStyle=d.italic.checked?"oblique":"normal"},!1),d.underline.addEventListener("change",()=>{i().style.textDecoration=d.underline.checked?"underline":"none"},!1),d.size.addEventListener("change",()=>{i().style.fontSize=d.size.value+"pt"},!1)}function It(e){let t=De(e);console.log(t,d);for(let[n,o]of Object.entries(t))d[n].value=o}function De(e){return{content:e.innerText,color:e.style.color??"black",bold:String(e.style.fontWeight==="bold"),italic:String(e.style.fontStyle==="oblique"),underline:String(e.style.textDecoration==="underline"),size:(e.style.fontSize??"12pt").slice(0,-2)}}var G={};m(G,{attributes:()=>Pe,initializeToolbar:()=>Tt,realElement:()=>ae,showToolbar:()=>kt});function ae(){let e=document.createElement("input");return e.type="text",e.id=a(),e.dataset.name=`\u10DB\u10DD\u10D9\u10DA\u10D4 \u10DE\u10D0\u10E1\u10E3\u10EE\u10D8 (${e.id})`,e.dataset.type="shortTextInput",e}var Q={},Ct=e=>document.getElementById(e);function Tt(){Q.width=Ct("shortTextInput-toolbar-width"),Q.width.addEventListener("change",()=>{i().style.width=Q.width.value+"ch"})}function kt(e){let t=Pe(e);for(let[n,o]of Object.entries(t))Q[n].value=o}function Pe(e){return{width:e.style.width.slice(0,-2)}}var X={};m(X,{attributes:()=>Rt,children:()=>Lt,initializeToolbar:()=>Bt,realElement:()=>se,showToolbar:()=>St});function se(){let e=a();return c("multipleChoiceInput","ol",e,`\u10DB\u10E0\u10D0\u10D5\u10D0\u10DA\u10D0\u10E0\u10E9\u10D4\u10D5\u10DC\u10D8\u10D0\u10DC\u10D8 \u10DE\u10D0\u10E1\u10E3\u10EE\u10D8 (${e})`)}var Lt=["multipleChoiceItem"];function Bt(){}function St(e){}function Rt(e){return{}}var K={};m(K,{attributes:()=>At,initializeToolbar:()=>$t,parents:()=>Nt,realElement:()=>M,showToolbar:()=>Ot});function M(){let e=document.createElement("li");e.dataset.type="multipleChoiceItem",e.id=a(),e.dataset.name=`\u10D0\u10E0\u10E9\u10D4\u10D5\u10D0\u10DC\u10D8 (${e.id})`;let t=document.createElement("input");return t.type="checkbox",t.id=a(),e.appendChild(t),e}var Nt=["multipleChoiceInput"];function $t(){}function Ot(e){}function At(e){return{}}var Y={};m(Y,{attributes:()=>Dt,children:()=>jt,initializeToolbar:()=>zt,realElement:()=>ce,showToolbar:()=>_t});function ce(){let e=a();return c("singleChoiceInput","ol",e,`\u10D4\u10E0\u10D7\u10D0\u10E0\u10E9\u10D4\u10D5\u10DC\u10D8\u10D0\u10DC\u10D8 \u10DE\u10D0\u10E1\u10E3\u10EE\u10D8 (${e})`)}var jt=["singleChoiceItem"];function zt(){}function _t(e){}function Dt(e){return{}}var Z={};m(Z,{attributes:()=>Ft,initializeToolbar:()=>Ht,parents:()=>Pt,realElement:()=>de,showToolbar:()=>Mt});function de(e){let t=document.createElement("li");t.dataset.type="singleChoiceItem",t.id=a(),t.dataset.name=`\u10D0\u10E0\u10E9\u10D4\u10D5\u10D0\u10DC\u10D8 (${t.id})`;let n=document.createElement("input");return n.type="radio",n.id=a(),n.name=e,t.appendChild(n),t}var Pt=["singleChoiceInput"];function Ht(){}function Mt(e){}function Ft(e){return{}}var me={};m(me,{attributes:()=>Vt,children:()=>Ut,initializeToolbar:()=>Jt,realElement:()=>qt,showToolbar:()=>Wt});function qt(){let e=a();return c("browserSim","browser-sim",e,`\u10D1\u10E0\u10D0\u10E3\u10D6\u10D4\u10E0\u10D8\u10E1 \u10E1\u10D8\u10DB\u10E3\u10DA\u10D0\u10E2\u10DD\u10E0\u10D8 (${e})`)}var Ut=["browserPage"];function Jt(){}function Wt(e){}function Vt(e){return{}}var pe={};m(pe,{attributes:()=>He,initializeToolbar:()=>Xt,parents:()=>Gt,realElement:()=>Qt,showToolbar:()=>Kt});function Qt(){let e=a(),t=c("browserPage","browser-page",e,`\u10D2\u10D5\u10D4\u10E0\u10D3\u10D8 (${e})`);return t.setAttribute("closable","true"),t}var Gt=["browserSim"],v={},ue=e=>document.getElementById(e);function Xt(){v.closable=ue("browserPage-toolbar-closable"),v.title=ue("browserPage-toolbar-title"),v.url=ue("browserPage-toolbar-url"),v.closable.addEventListener("change",()=>{i().setAttribute("closable",String(v.closable.checked))}),v.title.addEventListener("keyup",()=>{i().setAttribute("title",v.title.value)}),v.url.addEventListener("keyup",()=>{i().setAttribute("url",v.url.value)})}function Kt(e){let t=He(e);for(let[n,o]of Object.entries(t))v[n].value=o}function He(e){return{closable:e.getAttribute("closable")??"true",title:e.getAttribute("title")??"",url:e.getAttribute("url")??e.id}}var fe={};m(fe,{attributes:()=>Fe,children:()=>Zt,initializeToolbar:()=>en,realElement:()=>Yt,showToolbar:()=>tn});function Yt(){let e=a();return c("browserLink","browser-link",e,`\u10D1\u10E0\u10D0\u10E3\u10D6\u10D4\u10E0\u10D8\u10E1 \u10DA\u10D8\u10DC\u10D9\u10D8 (${e})`)}var Zt=["text","image"],B={},Me=e=>document.getElementById(e);function en(){B.browser=Me("browserLink-toolbar-browser"),B.url=Me("browserLink-toolbar-url"),B.browser.addEventListener("change",()=>{i().setAttribute("browser",B.browser.value)}),B.url.addEventListener("change",()=>{i().setAttribute("url",B.url.value)})}function tn(e){let t=Fe(e);for(let[n,o]of Object.entries(t))B[n].value=o}function Fe(e){return{browser:e.getAttribute("browser")??"",url:e.getAttribute("to")??""}}var ye={};m(ye,{attributes:()=>qe,children:()=>mn,initializeToolbar:()=>fn,realElement:()=>dn,showToolbar:()=>hn});var ge={};m(ge,{attributes:()=>ln,children:()=>nn,initializeToolbar:()=>on,realElement:()=>he,showToolbar:()=>rn});function he(){let e=a();return c("tableRow","tr",e,"\u10E1\u10E2\u10E0\u10D8\u10E5\u10DD\u10DC\u10D8")}var nn=[];function on(){}function rn(e){}function ln(e){return{}}var be={};m(be,{attributes:()=>cn,initializeToolbar:()=>an,realElement:()=>ee,showToolbar:()=>sn});function ee(){let e=a();return c("tableElement","td",e,"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8")}function an(){}function sn(e){}function cn(e){return{}}function dn(){let e=a(),t=c("table","table",e,`\u10EA\u10EE\u10E0\u10D8\u10DA\u10D8 (${e})`);return t.appendChild(he()),t.lastChild.appendChild(ee()),t}var mn=[];function un(e,t){let n=e.children.length;if(n<t)for(let o=0;o<t-n;o++){let r=F(e.lastChild);e.appendChild(r)}else if(n>t)for(;e.children.length>t;)e.lastChild.remove();e.dataset.rows=String(t),ve(e)}function pn(e,t){let n=e.firstChild.children.length;for(let o of e.children)if(n<t)for(let r=0;r<t-n;r++)o.appendChild(ee());else for(;o.children.length;)o.lastChild.remove();e.dataset.cols=String(t),ve(e)}var E={},Ee=e=>document.getElementById(e);function fn(){E.style=Ee("table-toolbar-style"),E.rows=Ee("table-toolbar-rows"),E.cols=Ee("table-toolbar-cols"),E.style.addEventListener("change",()=>{i().dataset.style=E.style.value}),E.rows.addEventListener("change",()=>{let e=i();un(e,Number(E.rows.value))}),E.cols.addEventListener("change",()=>{let e=i();pn(e,Number(E.cols.value))})}function hn(e){let t=qe(e);console.log(E,t);for(let[n,o]of Object.entries(t))E[n].value=o}function qe(e){return{style:e.dataset.style||"empty",rows:e.dataset.rows||"1",cols:e.dataset.cols||"1"}}function y(e){let t=e.dataset.type,n=e.id,o=e.dataset.name,r=[];for(let l of e.children){let s=y(l);s&&(s instanceof HTMLElement?r.push(s):r.push(...s))}if(t!==void 0){let l=document.createElement("div");l.innerHTML=r.length===0?`<div class="list" tabindex="0" data-id="${n}" data-type="${t}"><span data-type="${t}">${o}</span></div>`:`<details open class="list" tabindex="0" data-id="${n}" data-type="${t}"><summary data-type="${t}">${o}</summary></details>`;let s=l.firstChild;for(let at of r)s.appendChild(at);return s}else return r}var u={container:N,paragraph:$,formula:ie,text:V,shortTextInput:G,multipleChoiceInput:X,multipleChoiceItem:K,singleChoiceInput:Y,singleChoiceItem:Z,browserSim:me,browserPage:pe,browserLink:fe,table:ye,tableRow:ge,tableElement:be};console.log(u);function Ue(){console.log("hello");for(let{initializeToolbar:e}of Object.values(u))e&&e()}function xe(e){let t=[];console.log(e.dataset.type),console.log(u);for(let n of Object.keys(u)){let o=!0;u[e.dataset.type].children!==void 0&&(o&&=u[e.dataset.type].children.includes(n)),u[n].parents!==void 0&&(o&&=u[n].parents.includes(e.dataset.type)),o&&t.push(n)}return console.log(t),t}var gn=document.getElementById("page-buttons"),Je=document.getElementById("add-page"),ne=0,x=0,A=[];function te(){let e=document.createElement("input");e.type="radio",e.id=`page-${x+1}`,e.name="current-page";let t=x;e.addEventListener("change",()=>{We(t)});let n=document.createElement("label");n.innerText=String(x+1),n.appendChild(e),gn.insertBefore(n,Je),A.push([]),x+=1,f.firstElementChild.dataset.pages=String(x)}function bn(){for(let e of A[ne])e.classList.remove("current")}function We(e){if(e<x&&e>=0){bn(),ne=e;for(let t of A[ne])t.classList.add("current")}}function S(e){switch(e.dataset.visibilityType||"always"){case"only":let n=Number(e.dataset.visibleOnlyOn||"1");for(;n>x;)te();Qe(e,n);break;case"range":let o=Number(e.dataset.visibleFrom||"1"),r=Number(e.dataset.visibleTo||"1");for(;o>x;)te();for(;r>x;)te();En(e,o,r);break}for(let n of e.children)S(n)}function Ve(e){for(let t of A){let n=t.indexOf(e);n>=0&&t.splice(n,1)}}function Qe(e,t,n=!0){t-=1,t<x&&t>=0&&(n&&Ve(e),A[t].includes(e)||A[t].push(e),t===ne&&We(t))}function En(e,t,n){Ve(e);for(let o=t;o<=n;o++)Qe(e,o,!1)}Je.addEventListener("click",()=>{te()});var Xe={general:["visibility-type","visible-only-on","visible-from","visible-to"]},yn={general:e=>{let t={"visibility-type":e.dataset.visibilityType||"always"};switch(t["visibility-type"]){case"only":t["visible-only-on"]=e.dataset.visibleOnlyOn||"1";break;case"range":t["visible-from"]=e.dataset.visibleFrom||"1",t["visible-to"]=e.dataset.visibleTo||"1";break}return t}},b={};for(let e of Object.keys(Xe)){let t={};for(let n of Xe[e]){let o=document.getElementById(`${e}-toolbar-${n}`);console.log(e,n),t[n]={element:o,addEventListener:o.addEventListener,set value(r){if(o.nodeName==="INPUT"){let l=o;switch(l.type){case"text":case"number":l.value=r;break;case"checkbox":l.checked=r}}(o.nodeName==="SELECT"||o.nodeName==="TEXTAREA")&&(o.value=r),this.setTrigger(r)},setTrigger(r){}}}b[e]=t}var Ke={_elements:{},_current:void 0,show(e){this._current&&this._current.classList.remove("current");let t=e.dataset.type;if(this._elements[t]===void 0&&(this._elements[t]=document.getElementById(`${t}-toolbar`)),this._current=this._elements[t],t==="browserLink"){let r=function(l){l.tagName==="BROWSER-SIM"&&(o[l.dataset.name]=l.id),l.tagName==="BROWSER-PAGE"&&n.push(l.getAttribute("url"));for(let s of l.children)r(s)},n=[],o={};r(f),b.browserLink.url.element.innerHTML="",b.browserLink.browser.element.innerHTML="";for(let l of n){let s=document.createElement("option");s.value=l,s.innerText=l,b.browserLink.url.element.appendChild(s)}for(let l of Object.keys(o)){let s=document.createElement("option");s.value=o[l],s.innerText=l,b.browserLink.browser.element.appendChild(s)}}if(this._current){this._current.classList.add("current"),u[t].showToolbar(e);let n=yn.general(e);for(let o of Object.keys(n))b.general[o].value=n[o]}},hide(){this._current&&(this._current.classlist.remove("current"),this._current=void 0)}};function vn(){b.general["visibility-type"].setTrigger=e=>{Oe.dataset.visibilityType=e},b.general["visibility-type"].element.addEventListener("change",e=>{b.general["visibility-type"].setTrigger(e.target.value),i().dataset.visibilityType=e.target.value}),b.general["visible-only-on"].element.addEventListener("change",e=>{i().dataset.visibleOnlyOn=e.target.value,S(i())}),b.general["visible-from"].element.addEventListener("change",e=>{i().dataset.visibleFrom=e.target.value,S(i())}),b.general["visible-to"].element.addEventListener("change",e=>{i().dataset.visibleTo=e.target.value,S(i())})}vn();var we=0;function a(){return String(we++)}function Ie(e){let t=Number(e.id);t>=we&&(we=t+1);for(let n of e.children)Ie(n)}function F(e){let t=e.cloneNode(!0);function n(o){o.id=a();for(let r of o.children)n(r)}return n(t),t}var R;function p(){return R}function z(){Ze(),R&&(R.blur(),R.removeAttribute("id")),R=void 0}function oe(e){z(),R=e,R.setAttribute("id","selected");let t=document.getElementById(e.dataset.id);xn(t),Ke.show(t)}function Ye(e){oe(e)}function ve(e){let t=e.id,n=I.querySelector(`[data-id="${t}"]`);n.parentElement.replaceChild(y(e),n)}var j;function i(){return j}function Ze(){j&&j.classList.remove("selected"),j=void 0}function xn(e){Ze(),j=e,j.classList.add("selected")}var Ce={multipleChoiceInput:e=>{let t={options:[],correct:[]};for(let n of e.children){let o=n.children[0];t.options.push(o.id),t.correct.push(o.checked)}return t},singleChoiceInput:e=>{let t={options:[],correct:[]};for(let n of e.children){let o=n.children[0];t.options.push(o.id),t.correct.push(o.checked)}return t},shortTextInput:e=>({correct:e.value})};var Te;function et(){Te={};for(let e of Object.keys(Ce))for(let t of f.querySelectorAll(`[data-type=${e}]`))console.log("extracted",Ce[e](t)),Te[t.id]=Ce[e](t);return Te}var wn={Authorization:"Bearer "+(localStorage.getItem("authToken")??"")};function ke(){return wn}var Le="https://eko.dimitri.ge/api";async function tt(e){let t=await fetch(`${Le}/test/${e}`,{headers:ke()});if(!t.ok)throw new Error(t.statusText);return await t.json()}function nt(e,t){return fetch(`${Le}/test/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",...ke()},body:JSON.stringify(t)})}var _;async function ot(e,t){_=e,localStorage.setItem("currentFile",JSON.stringify(e)),t!==void 0&&await nt(t,e)}async function rt(e){if(e!==void 0)try{return _=await tt(e),_}catch(n){console.log(n)}let t=localStorage.getItem("currentFile");return t!=null?_=JSON.parse(t):_={content:'<div data-type="container" data-name="\u10DB\u10D7\u10D0\u10D5\u10D0\u10E0\u10D8 \u10D9\u10DD\u10DC\u10E2\u10D4\u10D8\u10DC\u10D4\u10E0\u10D8" id="0" data-pages="1"></div>'},_}var In=document.getElementById("test-name"),Cn=window.location.search,Tn=new URLSearchParams(Cn),kn=Tn.get("id"),it={testName:void 0,export(){let e=l=>{l.classList.remove("current"),l.className===""&&l.removeAttribute("class");for(let s of l.children)e(s)},t=f.cloneNode(!0);e(t);let n=t.innerHTML.trim().replaceAll(/[\s\t][\s\t]+/g,"").replaceAll(' contenteditable="true"',""),o=et();localStorage.setItem("test",JSON.stringify({html:n,gradingScheme:o}));let r=In.value;return{content:n,name:r,description:"",tags:{},gradingScheme:o}},load({content:e,gradingScheme:t}){console.log(e),t||(t={}),f.innerHTML=e;for(let n of f.getElementsByTagName("p"))n.contentEditable="true";for(let n of f.getElementsByTagName("span"))n.contentEditable="true";Ie(f.firstChild);for(let n of Object.keys(t))document.getElementById(n).value=t[n].correct;I.innerHTML="",I.appendChild(y(f.firstElementChild)),S(f.firstElementChild)}};document.getElementById("save-test").addEventListener("click",e=>{ot(it.export())});async function Ln(){it.load(await rt(kn))}Ln();var Be={};m(Be,{realElement:()=>Bn});function Bn(){let e=k();return e.appendChild(L()),e.appendChild(ae()),e}var Se={};m(Se,{realElement:()=>Sn});function Sn(){let e=k();e.appendChild(L());let t=se();return t.appendChild(M()),t.appendChild(M()),t.appendChild(M()),e.appendChild(t),e}var Ne={};m(Ne,{realElement:()=>Rn});function Re(e){let t=de(e),n=le();return t.append(n),n.innerText=" abc ",t}function Rn(){let e=k();e.appendChild(L());let t=ce();return t.appendChild(Re(t.id)),t.appendChild(Re(t.id)),t.appendChild(Re(t.id)),e.appendChild(t),e}var D={shortTextQuestion:Be,multipleChoiceQuestion:Se,singleChoiceQuestion:Ne};function lt(){let e=[];for(let t of Object.keys(D))e.push(t);return e}var q,re;function Nn(){let e=!1;I.addEventListener("click",t=>{p()!==void 0&&(p().contains(t.target)||z(),e||t.preventDefault(),e=!0)},!0),I.addEventListener("contextmenu",t=>{let n=t.target;if(t.preventDefault(),n.classList.contains("list"))oe(n);else if(n.parentElement.classList.contains("list"))oe(n.parentElement);else return;t.stopPropagation();let o=["rcm-add-child","rcm-add-preset","rcm-copy","rcm-delete","rcm-rename"];(n.parentElement.parentElement.parentElement.classList.contains("list")||n.parentElement.parentElement.classList.contains("list"))&&o.push("rcm-add-sibbling"),re!==void 0&&(o.push("rcm-paste-child"),n.parentElement?.classList.contains("list")&&o.push("rcm-paste-above")),P(w.rightClick,o,n)},!0),I.addEventListener("focus",t=>{let n=t.target;n.classList.contains("list")||(n=n.parentElement),n.classList.contains("list")&&(Ye(n),e=!1)},!0),document.getElementById("rcm-add-child").addEventListener("click",t=>{q=$n,P(w.element,xe(p()),t.target)},!1),document.getElementById("rcm-add-sibbling").addEventListener("click",t=>{q=On,P(w.element,xe(p().parentElement),t.target)},!1),document.getElementById("rcm-add-preset").addEventListener("click",t=>{q=An,P(w.preset,lt(),t.target)},!1),document.getElementById("rcm-copy").addEventListener("click",t=>{let n=p().dataset.id;re=document.getElementById(n),T()},!1),document.getElementById("rcm-paste-child").addEventListener("click",t=>{let n=F(re);i().appendChild(n),p().parentElement.replaceChild(y(i()),p()),T()},!1),document.getElementById("rcm-paste-above").addEventListener("click",t=>{let n=F(re);i().parentElement.insertBefore(n,i());let o=y(i().parentElement);p().parentElement.parentElement.replaceChild(o,p().parentElement),T()},!1),document.getElementById("rcm-delete").addEventListener("click",t=>{let n=p().dataset.id;p().remove(),z(),document.getElementById(n).remove(),T()},!1),document.getElementById("rcm-rename").addEventListener("click",t=>{let n=p().dataset.id,o=p().firstChild,r=o.innerText,l=document.createElement("input");l.type="text",l.value=r,p().insertBefore(l,o),o.remove(),l.focus(),l.addEventListener("blur",s=>{l.contains(s.relatedTarget)||(o.innerText=l.value,document.getElementById(n).dataset.name=l.value,p().insertBefore(o,l),l.remove())}),l.addEventListener("click",s=>{s.stopPropagation()}),l.addEventListener("keyup",s=>{(s.key==="Enter"||s.key==="Escape")&&l.blur()}),o.remove()},!1);for(let t of Object.keys(u)){let n=document.getElementById(t);n&&n.addEventListener("click",()=>{q(p(),t),z(),T()})}for(let t of Object.keys(D)){let n=document.getElementById(t);n&&n.addEventListener("click",()=>{q(p(),t),z(),T()})}console.log("hello?"),Ue()}Nn();function $n(e,t){let n=e.dataset.id,o=document.getElementById(n),r=u[t].realElement(n);o.appendChild(r),u[t].mounted!==void 0&&u[t].mounted(r),e.parentElement.replaceChild(y(o),e)}function On(e,t){let n=e.dataset.id,o=document.getElementById(n),r=o.parentElement,l=e.parentElement.id,s=u[t].realElement(l);r.insertBefore(s,o),u[t].mounted!==void 0&&u[t].mounted(s),e.parentElement.insertBefore(y(s),e)}function An(e,t){let n=e.dataset.id,o=document.getElementById(n),r=D[t].realElement();o.appendChild(r),D[t].mounted!==void 0&&D[t].mounted(r),e.parentElement.replaceChild(y(o),e)}
