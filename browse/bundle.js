function L(a,e){return a<e?a:e}function k({id:a,name:e,description:s,tags:t}){let n=document.createElement("details");n.setAttribute("name","test"),n.dataset.id=a;let o=document.createElement("summary"),i=document.createElement("span");i.className="title",i.textContent=e,o.appendChild(i);let d=[];for(let r of Object.keys(t))d.push(...t[r]);if(d.length>0){let r=document.createElement("ul");r.className="tags";for(let m=0;m<L(d.length,5);m++){let c=document.createElement("li");c.setAttribute("t",d[m]),r.appendChild(c)}o.appendChild(r)}let l=document.createElement("button");if(l.classList.add("open"),l.textContent="\u10D2\u10D0\u10EE\u10E1\u10DC\u10D0",o.appendChild(l),n.appendChild(o),s){let r=document.createElement("div");r.className="description",r.textContent=s,n.appendChild(r)}if(d.length>0){let r=document.createElement("ul");r.className="attributes";for(let m of Object.keys(t)){let c=document.createElement("li");if(c.appendChild(document.createTextNode(m+":")),t[m]&&t[m].length>0){let p=document.createElement("ul");p.className="tags",t[m].forEach(h=>{let f=document.createElement("li");f.setAttribute("t",h),p.appendChild(f)}),c.appendChild(p)}r.appendChild(c)}n.appendChild(r)}return n}async function g(){return[{id:"123",name:"\u10E0\u10D0\u10E6\u10D0\u10EA\u10D0 \u10E2\u10D4\u10E1\u10E2\u10D8",description:"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.",tags:{\u10D9\u10D5\u10DA\u10D4\u10D5\u10D0:["PISA"],\u10E1\u10D0\u10D2\u10D0\u10DC\u10D8:["\u10D9\u10D8\u10D7\u10EE\u10D5\u10D0","\u10D1\u10E3\u10DC\u10D4\u10D1\u10D8\u10E1\u10DB\u10D4\u10E2\u10E7\u10D5\u10D4\u10DA\u10D4\u10D1\u10D0","\u10DB\u10D0\u10D7\u10D4\u10DB\u10D0\u10E2\u10D8\u10D9\u10D0"]}},{id:"41241",name:"\u10E1\u10EE\u10D5\u10D0 \u10E2\u10D4\u10E1\u10E2\u10D8",description:"",tags:{\u10D9\u10D5\u10DA\u10D4\u10D5\u10D0:["PIRLS"],\u10E1\u10D0\u10E4\u10D4\u10EE\u10E3\u10E0\u10D8:["\u10E1\u10D0\u10D1\u10D0\u10D6\u10D8\u10E1\u10DD"],\u10E1\u10D0\u10D2\u10D0\u10DC\u10D8:["\u10DB\u10D0\u10D7\u10D4\u10DB\u10D0\u10E2\u10D8\u10D9\u10D0"]}}]}var b=null;async function x(a){b===null&&(b=await g()),console.log(b);for(let e of b)if(e.id===a)return e}var C=document.getElementById("test-details"),O=document.getElementById("close-test-details");function B(a){document.getElementById("\u10E1\u10D0\u10EE\u10D4\u10DA\u10D8").value=a.name,document.getElementById("\u10D0\u10E6\u10EC\u10D4\u10E0\u10D0").innerText=a.description,document.getElementById("attributes").value=a.tags}async function w(a){console.log(a),B(await x(a)),C.showModal()}O.addEventListener("click",()=>{C.close()});var v=class extends HTMLElement{#t={};addEntryButton;constructor(){super(),this.addEntryButton=document.createElement("button")}set options(e){this.#t=e,this.#e()}get value(){let e={},s=this.childNodes;for(let t=0;t<s.length-1;t++){let[n,o]=s[t].childNodes,[i,d]=[n.value,o.value];i&&d&&(e[i]===void 0?e[i]=[d]:e[i].push(d))}return e}set value(e){this.innerHTML="",this.appendChild(this.addEntryButton);let s=[];for(let n of Object.values(e).flat())s.push(this.#n());let t=0;this.#e();for(let[n,o]of Object.entries(e))for(let i of o){let[d,l]=s[t];d.value=n,this.#e(d),l.value=i,this.#e(l),t++}this.#e()}connectedCallback(){this.addEntryButton.innerText="+",this.addEntryButton.addEventListener("click",()=>{this.#n(),this.#e()}),this.appendChild(this.addEntryButton)}#n(){let e=new Option("","",!0);e.hidden=!0;let s=document.createElement("div"),t=document.createElement("select");t.appendChild(e.cloneNode());for(let i of Object.keys(this.#t))t.appendChild(new Option(i,i));t.addEventListener("change",()=>this.#e(t));let n=document.createElement("select");n.appendChild(e.cloneNode()),n.addEventListener("change",()=>this.#e(n));let o=document.createElement("button");return o.addEventListener("click",()=>{s.remove(),this.#e()}),o.innerText="-",s.append(t,n,o),this.insertBefore(s,this.addEntryButton),[t,n]}#o(e,s,t=!1){let n=Object.keys(s);if(t){e.innerHTML="",e.appendChild(new Option("","",!0)),e.firstChild.hidden=!0;for(let i of n)e.appendChild(new Option(i,i))}let o=e.firstChild?.nextSibling;for(let i=0;i<n.length;i++){if(i<n.length-1&&o===null)throw new Error("select element has too few options");o.disabled=!s[n[i]],o=o.nextSibling}}#e(e){let s=[],t={},n=this.childNodes;for(let o=0;o<n.length-1;o++){let i=n[o].childNodes[0],d=n[o].childNodes[1],[l,r]=[i.value,d.value];l!==void 0&&r!==void 0&&(t[l]===void 0&&(t[l]={}),t[l][r]=s.length,s.push([l,r,o]))}for(let o=0;o<s.length;o++){let[i,d,l]=s[o],r=n[l].childNodes[0],m=n[l].childNodes[1];delete t[i][d];let c={},p=[];for(let u of Object.keys(this.#t)){c[u]={};let E=!1;for(let y of this.#t[u])c[u][y]=t[u]===void 0||t[u][y]===void 0,E||=c[u][y];E&&p.push(u)}t[i][d]=o;let h={};for(let u of Object.keys(this.#t))h[u]=p.includes(u);this.#o(r,h);let f=e!==void 0&&r===e&&this.#t[i]!==void 0;this.#o(m,c[i]??{},f)}}};customElements.define("attribute-selector",v);var T=document.getElementById("list"),N=document.getElementById("attributes");T.addEventListener("click",a=>{if(a.target.classList.contains("open")){let e=a.target.parentElement.parentElement.dataset.id;console.log(e),w(e)}});async function P(){let a=await g();for(let e of a){let s=k(e);T.appendChild(s.cloneNode(!0))}N.options={\u10E1\u10D0\u10E4\u10D4\u10EE\u10E3\u10E0\u10D8:["\u10D3\u10D0\u10EC\u10E7\u10D4\u10D1\u10D8\u10D7\u10D8","\u10E1\u10D0\u10D1\u10D0\u10D6\u10D8\u10E1\u10DD","\u10E1\u10D0\u10E8\u10E3\u10D0\u10DA\u10DD"],\u10D9\u10D5\u10DA\u10D4\u10D5\u10D0:["PISA","TIMSS","PIRLS"],\u10E1\u10D0\u10D2\u10D0\u10DC\u10D8:["\u10DB\u10D0\u10D7\u10D4\u10DB\u10D0\u10E2\u10D8\u10D9\u10D0","\u10E4\u10D8\u10D6\u10D8\u10D9\u10D0","\u10D9\u10D8\u10D7\u10EE\u10D5\u10D0","\u10D1\u10E3\u10DC\u10D4\u10D1\u10D8\u10E1\u10DB\u10D4\u10E2\u10E7\u10D5\u10D4\u10DA\u10D4\u10D1\u10D0"],\u10D9\u10DA\u10D0\u10E1\u10D8:["1","2"],\u10D4\u10DC\u10D0:["\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8"],\u10EE\u10D8\u10DA\u10D5\u10D0\u10D3\u10DD\u10D1\u10D0:["\u10E1\u10D0\u10EF\u10D0\u10E0\u10DD","\u10E8\u10D4\u10D6\u10E6\u10E3\u10D3\u10E3\u10DA\u10D8","\u10D3\u10D0\u10DB\u10D0\u10DA\u10E3\u10DA\u10D8"]}}P();
